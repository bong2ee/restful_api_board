<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/header"></head> <!-- 헤더 인클루드 -->

<body class="hold-transition layout-top-nav">
<div class="wrapper">

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">회원가입</h1>
          </div>
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <div class="content">
      <div class="container">
        
		<div class="card card-primary">
          <!-- /.card-header -->
          <!-- form start -->
          <form>
            <div class="card-body">
			 <div class="form-group">
                <label for="exampleInputEmail1">성함</label>
                <input id="userName" type="text" class="form-control" placeholder="성함을 입력해주세요">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">이메일</label>
                <input id="userEmail" type="email" class="form-control" placeholder="이메일을 입력해주세요">
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">아이디</label>
                <input id="userId" type="text" class="form-control" placeholder="아이디를 입력해주세요">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">비밀번호</label>
                <input id="userPw" type="password" class="form-control" placeholder="비밀번호를 입력해주세요">
              </div>
            </div>
            <!-- /.card-body -->

            <div class="modal-footer justify-content-center" style="text-align: center">
              <button id="signupButton" type="button" class="btn btn-primary float-right">회원가입</button>
            </div>
          </form>
        </div>
			
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
    
  </div>

  <script>
    $('#signupButton').on('click', function() {
      //if (!validateForm()) {
      //  return false;
      //}

      save();
    });

    function validateForm() {
      if ($('#userName').val() === "") {
        alert("성함이 입력되지 않았습니다.");
        return false;
      }

      if ($('#userEmail').val() === "") {
        alert("이메일이 입력되지 않았습니다.");
        return false;
      }

      if ($('#userId').val() === "") {
        alert("아이디가 입력되지 않았습니다.");
        return false;
      }

      if ($('#userPw').val() === "") {
        alert("비밀번호가 입력되지 않았습니다.");
        return false;
      }

      return true;
    }

    function save() {
      let data = { 
		userNm: $('#userName').val(),
		emailAddr: $('#userEmail').val(),
		userId: $('#userId').val(),
		userPw: $('#userPw').val() 
	  };
      
	  
	  $.ajax({
          url: '/api/user/signup', 
          type: 'POST',
          contentType: 'application/json',  // 전송 데이터 형식
          dataType: 'json',  // 응답 데이터 형식
          data: JSON.stringify(data),  // JSON 형식으로 데이터 변환
          success: function(response) {
			  alert(response.message);
			  if (response.status === 'success') {
	              location.href = "/";
	          } 
          },
          error: function(xhr, status, error) {
              console.error('Error:', error); 
			  alert("서버 오류가 발생했습니다. 나중에 다시 시도해주세요.");
          }
      });
					  
    }
  </script>

  </body>
  <!-- 푸터 인클루드 -->
  <footer th:replace="common/footer"></footer>
  </html>